<!-- build time:Sun May 05 2019 18:42:24 GMT+0800 (CST) --><!DOCTYPE html><html lang="zh-Hans" class="loading"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><title>Unity中的屏幕适配及PixelPerfect - 鸵鸟工作室</title><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="google" content="notranslate"><meta name="keywords" content="Fechin,"><meta name="description" content="鸵鸟工作室,PixelPerfect什么叫PixelPerfect?假设 1unit = 1 pixel像素只可以等倍数的放大,比如1倍,2倍,3倍…假设相机的Size是5 则在Editor屏幕中,一列(Hei,"><meta name="author" content="鸵鸟工作室"><link rel="alternative" href="atom.xml" title="鸵鸟工作室" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><link rel="stylesheet" href="/css/diaspora.css"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8691406134231910",enable_page_level_ads:!0})</script><script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js"></script></head></html><body class="loading"><span id="config-title" style="display:none">鸵鸟工作室</span><div id="loader"></div><div id="single"><div id="top" style="display:block"><div class="bar" style="width:0"></div><a class="icon-home image-icon" href="javascript:;" data-url="http://鸵鸟工作室.fun"></a><div title="播放/暂停" class="icon-play"></div><h3 class="subtitle">Unity中的屏幕适配及PixelPerfect</h3><div class="social"><div><div class="share"><a title="获取二维码" class="icon-scan" href="javascript:;"></a></div><div id="qr"></div></div></div><div class="scrollbar"></div></div><div class="section"><div class="article"><div class="main"><h1 class="title">Unity中的屏幕适配及PixelPerfect</h1><div class="stuff"><span>十二月 02, 2017</span><ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/Unity/">Unity</a></li></ul></div><div class="content markdown"><h2 id="PixelPerfect"><a href="#PixelPerfect" class="headerlink" title="PixelPerfect"></a>PixelPerfect</h2><p><strong>什么叫PixelPerfect?</strong></p><p>假设 1unit = 1 pixel</p><p><img src="/media/a.png" alt="a"></p><p>像素只可以等倍数的放大,比如1倍,2倍,3倍…</p><p>假设相机的Size是5 则在Editor屏幕中,一列(Heigh方向)显示10个像素. Game屏(目标设备)的分辨率的高必须为10的整数被<br>n x 10 (10,20,30,40 这样)</p><p>此时只要把Editor中的像素 1:n的复制到 Game屏 即可, 此时就是 PixelPerfect (n是整数倍)</p><p>再假设,此时更改Game屏的分辨率到 30x13 ,</p><p>需要把Editor中的10个像素 基于某种算法 复制到 Game屏的13个像素中 此时就不是PixelPerfect.</p><p>换句话说就是</p><blockquote><p><strong>目标设备分辨率(Game屏幕) 必须是 开发分辨率 (Editor屏) 的整数倍才行.</strong></p></blockquote><p>注意: 目标分辨率不能小于开发分辨率,比如 开发分辨率是100px高,但是设备分辨率只有50px高. 此时如果期望把100px显示在50px的设备上 必然会缩放,缩放必然会丢像素,所以无法为PixelPerfect</p><p>就着上面说,<code>因为设备分辨率是固定的,所以能调整的仅有开发分辨率,也就是相机的Size.</code></p><p>假设 设备分辨率为1440x900 , 高度为900px. (1unit=1pixel) 则由如下关系</p><table><thead><tr><th>设备分辨率</th><th>开发分辨率</th><th>相机Size</th><th>相机Size</th></tr></thead><tbody><tr><td>900px</td><td>900px</td><td>450</td><td>1x</td></tr><tr><td>900px</td><td>450px</td><td>225</td><td>2x</td></tr><tr><td>900px</td><td>300px</td><td>150</td><td>3x</td></tr><tr><td>900px</td><td>225px</td><td>112.5</td><td>4x</td></tr></tbody></table><p>容易混淆: 开发分辨率并不是图片的大小,比如一张背景图可以是1000px x 1000px的 只不过显示的区域是900px 450px (仅仅显示一部分). 反过来说 一个角色 可以是 30px x 50px. 同理 显示的区域仍旧是 900px 450px. 图片画多大和开发分辨率无关.</p><h3 id="PixelPerfect-适合的适配方案"><a href="#PixelPerfect-适合的适配方案" class="headerlink" title="PixelPerfect 适合的适配方案"></a>PixelPerfect 适合的适配方案</h3><p><img src="/media/8985113e-7962-4d5c-840a-a032ab77a46f.jpg" alt="8985113e-7962-4d5c-840a-a032ab77a46f"></p><p>比如横板卷轴,设计关卡高度为300px,上下留出50px冗余 也就是 美术做了一张 1000px x 400px的图片. 其中间300px是所有设备都会显示的,上下个50px是根据设备不同.<br>有的显示有的不显示 且不显示的话也不会影响整体的游戏体验.</p><p>此时在保证PixelPerfect的情况下 设备分辨率必须满足</p><table><thead><tr><th>倍率</th><th>设备分辨率高度范围</th></tr></thead><tbody><tr><td>1x</td><td>300px~400px</td></tr><tr><td>2x</td><td>600px~800px</td></tr><tr><td>3x</td><td>900px~1200px</td></tr></tbody></table><p>假设设备分辨率(高度) 是 1000px</p><blockquote><p><strong>开发中的相机Size <em>2 </em>N = 设备分辨率.</strong></p></blockquote><p>N一定为整数,从上面表中可以知道N此时为3 (因为1000px 在900px~1200px之间)</p><p>从而求出</p><p>开发中的相机Size = 设备分辨率/(2*N) = 1000/6 = 166.666666</p><p>反过来也可以说</p><p>通过把相机Size设置为166.666666, 使得原图以扩大3被的情况下映射到了1000px分辨率的设备上了. 从而达到了PixelPerfect.</p><p>注意:</p><p>Size=166.66666, 也就是一个屏幕内可以显示的像素是333.3333px. 这也是为什么图片要制作为 300px有效像素,然后上下再留出50px冗余像素的原因</p><h3 id="不适合做PixelPerfect的例子"><a href="#不适合做PixelPerfect的例子" class="headerlink" title="不适合做PixelPerfect的例子"></a>不适合做PixelPerfect的例子</h3><p>比如 设备分辨率是 850px</p><p>按照上面的公式 <code>开发中的相机Size * 2 * N = 设备分辨率</code>.</p><table><thead><tr><th>N的取值</th><th>开发中相机Size*2</th></tr></thead><tbody><tr><td>1x</td><td>850px</td></tr><tr><td>2x</td><td>425px</td></tr><tr><td>3x</td><td>283.333px</td></tr></tbody></table><p>可以看出</p><p><code>N=2</code> 则 会显示出开发分辨率下425px的内容,但是美术画的图是1000px x 400px的,多出来25px空白,<br><code>N=1</code> 则 显示283.333px的内容 小于300px的有效内容. 会显示不全. 比如上图例子中那样 可能头上的陷阱就看不到了.</p><p>此时 并没有办法使得在PixelPerfect的情况下使得开发分辨率锁定在300px~400px之间. 2x的情况会导致穿帮,3x会导致显示内容过小</p><p>如若要做PixelPerfect 则需要做不锁高的游戏,也就是游戏世界中的高度大于1个视口高度,比如泰拉瑞亚这种,世界很大,能看到的只是其中一个区域. 此时相机高度发生一定变化 并不会导致穿帮.<br>或者上下直接留黑边,然后采取N=2的情况去做处理.</p><h2 id="普通的屏幕适配方案"><a href="#普通的屏幕适配方案" class="headerlink" title="普通的屏幕适配方案"></a>普通的屏幕适配方案</h2><p>对于普通游戏(非像素游戏),其实没有必要非达到PixelPerfect的. 那此时一般采取的适配方案是锁高,或者锁宽.或者两种之间的变种.</p><h3 id="锁高"><a href="#锁高" class="headerlink" title="锁高"></a>锁高</h3><p>锁高也是最简单的一种. 比如开发分辨率设定是 任意宽度 x 1000px . 然后在给定 任意设备分辨率的情况下. 希望可以把这1000px都显示出来.无论能显示多宽的内容.</p><p>比如设备高度是 500px , 那就是把现有内容缩小一倍显示在屏幕上. 如果设备是800px 则是缩小0.8 (800/1000)显示在屏幕上.</p><p>注意: 容易和PixelPerfect混淆的是. PixelPerfect是通过调整CameraSize从而保证缩放比例一定是整数,而普通锁高适配是恒定CameraSize</p><p>啰嗦一句. 上面的公式 开发中的相机Size <em>2 </em>N = 设备分辨率 同样也适用这里. 只不过开发相机Size恒定 . 而N就是真正缩放的倍数.比如上面例子中0.5(500/1000), 0.8(800/1000)</p><p>只不过这个N 在Unity的面板里面是看不到的.</p><p>比如开发分辨率定位720px x 1280px . 在Unity中讲CameraSize设置为6.4 (6.4x2=12.8 默认 1unit=100px)</p><p><img src="/media/97f07975-dba4-478c-ae39-f8e3d020e700.jpg" alt="97f07975-dba4-478c-ae39-f8e3d020e700"></p><p>开发分辨率 720x1280 :</p><p><img src="/media/BaiduNetdisk_mac_2.2.2-1.jpg" alt="BaiduNetdisk_mac_2.2.2"></p><p>设备分辨率 300x500:</p><p><img src="/media/c2cd50a9-8bc8-4023-90de-891ca8df826a.jpg" alt="c2cd50a9-8bc8-4023-90de-891ca8df826a"></p><p>设备分辨率 30x300:</p><p><img src="/media/92b988e9-a161-41dd-8979-9d07efa78223.jpg" alt="92b988e9-a161-41dd-8979-9d07efa78223"></p><p><strong>在锁高的情况下,上下两个五角星一直会显示,无论设备分辨率是多少.</strong></p><p>此时并不用做任何的操作</p><h3 id="锁宽"><a href="#锁宽" class="headerlink" title="锁宽"></a>锁宽</h3><p>锁宽稍微要复杂一些. 首先要明确的是.适配的方式就是在<code>保证宽高比</code>的情况下 放大缩小.使得锁定的一方完全显示在屏幕内.</p><p>还是上面的例子. 开发分辨率是 720x1280 . 设备分辨率是 30x300 锁高的情况下就是把 1280px 缩放到 300px的设备上</p><p>缩放倍数 = 300/1280 = 0.234375<br>因为宽高比不便. 所以宽度被缩放到了0.234375 * 720px = 168.75px. 设备只有30px的宽. 所以只能看到上下两颗星星. 左右的看不到.</p><p><img src="/media/b1f0bbc9-5a2c-4d4f-9165-63e189e41659.jpg" alt="b1f0bbc9-5a2c-4d4f-9165-63e189e41659"></p><p><img src="/media/f75f68ad-bd44-4776-b542-ac43712b090e.png" alt="f75f68ad-bd44-4776-b542-ac43712b090e"></p><p><strong>锁宽的情况下需要更改CameraSize从而使得在不同设备的情况下,在设备上看到的宽度和开发中的一样.</strong></p><p>根据缩放宽高比不变这条可以推导公式<br>设定:<br>开发分辨率宽 = 开W<br>开发分辨率高 = 开H<br>设备分辨率宽 = 设W<br>设备分辨率高 = 设H</p><p>其中 开H 也就是最后需要求得的值.从而推导,再给定的设备上 需要把CameraSize调整到何值</p><p>推导得到</p><blockquote><p><strong>CameraSize = 开W <em>设H / (设W </em>2)</strong></p></blockquote><h2 id="实际应用场景"><a href="#实际应用场景" class="headerlink" title="实际应用场景"></a>实际应用场景</h2><p>实际项目中, UI层一般都采取的是Canvas的全屏适配.也就不存在锁宽锁高. 主要是Scene场景. 能想到的比较典型的例子是</p><p><strong>涂鸦跳跃 (锁宽)</strong></p><p><img src="/media/5fd1a19e-d57e-4be1-9057-c879817a638b.jpeg" alt="5fd1a19e-d57e-4be1-9057-c879817a638b"></p><p><strong>Flappy bird (锁高)</strong></p><p><img src="/media/673be8de-23af-49f4-951e-d1684c59d226.jpeg" alt="673be8de-23af-49f4-951e-d1684c59d226"></p><!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]--><audio id="audio" loop preload="auto" controls data-autoplay="false"><source type="audio/mpeg" src=""></audio><ul id="audio-list" style="display:none"><li title="0" data-url="http://link.hhtjim.com/163/5146554.mp3"></li><li title="1" data-url="http://link.hhtjim.com/qq/001faIUs4M2zna.mp3"></li></ul></div><div id="gitalk-container" class="comment link" data-ae="false" data-ci="" data-cs="" data-r="" data-o="" data-a="" data-d="false">查看评论</div></div></div></div></div></body><script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script><script src="/js/plugin.js"></script><script src="/js/diaspora.js"></script><link rel="stylesheet" href="/photoswipe/photoswipe.css"><link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css"><script src="/photoswipe/photoswipe.min.js"></script><script src="/photoswipe/photoswipe-ui-default.min.js"></script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><!-- rebuild by neat -->